From: YOKOTA Hiroshi <yokota.hgml@gmail.com>
Date: Tue, 14 Sep 2021 23:51:04 +0900
Subject: Disable hardware acceleration support on armel

armel dose not supports NEON instructions.
---
 C/AesOpt.c    | 2 ++
 C/Sha1Opt.c   | 2 ++
 C/Sha256Opt.c | 2 ++
 3 files changed, 6 insertions(+)

diff --git a/C/AesOpt.c b/C/AesOpt.c
index 1bdc9a8..62b5968 100644
--- a/C/AesOpt.c
+++ b/C/AesOpt.c
@@ -508,6 +508,7 @@ VAES_COMPAT_STUB (AesCtr_Code_HW)
 
 #elif defined(MY_CPU_ARM_OR_ARM64) && defined(MY_CPU_LE)
 
+ #ifdef __ARM_NEON
   #if defined(__clang__)
     #if (__clang_major__ >= 8) // fix that check
       #define USE_HW_AES
@@ -521,6 +522,7 @@ VAES_COMPAT_STUB (AesCtr_Code_HW)
       #define USE_HW_AES
     #endif
   #endif
+ #endif
 
 #ifdef USE_HW_AES
 
diff --git a/C/Sha1Opt.c b/C/Sha1Opt.c
index dcedfbc..6d0ff6c 100644
--- a/C/Sha1Opt.c
+++ b/C/Sha1Opt.c
@@ -214,6 +214,7 @@ void MY_FAST_CALL Sha1_UpdateBlocks_HW(UInt32 state[5], const Byte *data, size_t
 
 #elif defined(MY_CPU_ARM_OR_ARM64)
 
+ #ifdef __ARM_NEON
   #if defined(__clang__)
     #if (__clang_major__ >= 8) // fix that check
       #define USE_HW_SHA
@@ -227,6 +228,7 @@ void MY_FAST_CALL Sha1_UpdateBlocks_HW(UInt32 state[5], const Byte *data, size_t
       #define USE_HW_SHA
     #endif
   #endif
+ #endif
 
 #ifdef USE_HW_SHA
 
diff --git a/C/Sha256Opt.c b/C/Sha256Opt.c
index cc8c53e..54e7610 100644
--- a/C/Sha256Opt.c
+++ b/C/Sha256Opt.c
@@ -214,6 +214,7 @@ void MY_FAST_CALL Sha256_UpdateBlocks_HW(UInt32 state[8], const Byte *data, size
 
 #elif defined(MY_CPU_ARM_OR_ARM64)
 
+ #ifdef __ARM_NEON
   #if defined(__clang__)
     #if (__clang_major__ >= 8) // fix that check
       #define USE_HW_SHA
@@ -227,6 +228,7 @@ void MY_FAST_CALL Sha256_UpdateBlocks_HW(UInt32 state[8], const Byte *data, size
       #define USE_HW_SHA
     #endif
   #endif
+ #endif
 
 #ifdef USE_HW_SHA
 
